---
import BlockMedia from '@/components/BlockMedia.astro';
import BlockText from './BlockText.astro';

let {
  videoUrl,
  captionUrl,
  imageUrl,
  text,
  textAlignment = 'left',
  max_width_container,
  mediaPositon = 'left'
} = Astro.props;

const NO_MAX_WIDTH = 'max-w-none';
const maxWidths = new Set([
  NO_MAX_WIDTH,
  'max-w-xs',
  'max-w-sm',
  'max-w-md',
  'max-w-lg',
  'max-w-xl',
  'max-w-2xl',
  'max-w-3xl',
  'max-w-4xl'
]);
const getMaxWidthClass = (width: string, defaultValue = NO_MAX_WIDTH) =>
  maxWidths.has(width) ? width : defaultValue;

const getMediaPositionClasses = (position: string) => {
  if (position === 'left') {
    return '';
  } else if (position === 'right') {
    return 'order-last';
  } else {
    return '';
  }
};
---

<div
  class:list={[
    'mx-auto mb-12 flex items-start gap-32',
    getMaxWidthClass(max_width_container)
  ]}
>
  <div class:list={['w-1/2', getMediaPositionClasses(mediaPositon)]}>
    {
      (videoUrl || imageUrl) && (
        <BlockMedia
          videoUrl={videoUrl}
          captionUrl={captionUrl}
          imageUrl={imageUrl}
          type='video'
        />
      )
    }
  </div>
  <div class='w-1/2'>
    {
      text && (
        <BlockText
          alignment={textAlignment}
          text={text}
          colorHeadline={'white'}
          colorText={'white'}
        />
      )
    }
  </div>
</div>
