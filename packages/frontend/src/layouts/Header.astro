---
import { fetchSettings } from '@/lib/directus';
import { Image } from 'astro:assets';
import Container from '../components/Container.astro';
import MainNavigation from '../components/MainNavigation.astro';
import Section from '../components/Section.astro';

const settings = await fetchSettings();
const isSvg = settings.logo_header?.filename_disk?.endsWith('.svg');
---

<header
  id='site-header'
  class='fixed top-0 z-50 w-full bg-white/[95%] transition-all duration-500 ease-in-out'
>
  <Section
    marginTop={'mt-0'}
    marginBottom={'mb-0'}
    paddingTop={'pt-0'}
    paddingBottom={'pb-0'}
    color={'transparent'}
  >
    <Container centered={false}>
      <div class='relative -mx-8 flex items-center justify-between px-8'>
        <a href='/' title='ZurÃ¼ck zur Startseite'>
          {
            settings.logo_header && (
              <>
                <Image
                  id='site-logo'
                  src={`${import.meta.env.DIRECTUS_URL}/assets/${
                    settings.logo_header.id
                  }?access_token=${import.meta.env.DIRECTUS_TOKEN}`}
                  alt='Logo Real Experts Network GmbH'
                  width='51'
                  height='72'
                  densities={[1, 2, 3]}
                  format={isSvg ? 'svg' : 'webp'}
                  class='h-auto w-auto lg:hidden'
                />
                <Image
                  id='site-logo'
                  src={`${import.meta.env.DIRECTUS_URL}/assets/${
                    settings.logo_header.id
                  }?access_token=${import.meta.env.DIRECTUS_TOKEN}`}
                  alt='Logo Real Experts Network GmbH'
                  width='63'
                  height='89'
                  densities={[1, 2, 3]}
                  format={isSvg ? 'svg' : 'webp'}
                  class='hidden h-auto w-auto lg:block'
                />
              </>
            )
          }
        </a>
        <MainNavigation />
      </div>
    </Container>
  </Section>
</header>
