---
import BlockText from './BlockText.astro';
import Media from './Media.astro';

let {
  videoUrl,
  captionUrl,
  imageUrl,
  imageAlt = '',
  text,
  textAlignment = 'left',
  textDesign,
  max_width_container,
  mediaPositon = 'left'
} = Astro.props;

const NO_MAX_WIDTH = 'max-w-none';
const maxWidths = new Set([
  NO_MAX_WIDTH,
  'max-w-xs',
  'max-w-sm',
  'max-w-md',
  'max-w-lg',
  'max-w-xl',
  'max-w-2xl',
  'max-w-3xl',
  'max-w-4xl'
]);

const mediaPositonClasses = {
  left: '',
  right: 'order-last'
};

const getMaxWidthClass = (width, defaultValue = NO_MAX_WIDTH) =>
  maxWidths.has(width) ? width : defaultValue;
---

<div
  class:list={[
    'mx-auto mb-12 flex items-start gap-28',
    getMaxWidthClass(max_width_container)
  ]}
>
  <div class:list={['w-1/2', mediaPositonClasses[mediaPositon] || '']}>
    {
      (videoUrl || imageUrl) && (
        <Media
          videoUrl={videoUrl}
          captionUrl={captionUrl}
          imageUrl={imageUrl}
        />
      )
    }
  </div>
  <div class='w-1/2'>
    {
      text && (
        <BlockText alignment={textAlignment} text={text} design={textDesign} />
      )
    }
  </div>
</div>
